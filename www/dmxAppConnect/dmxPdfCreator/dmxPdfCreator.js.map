{"version":3,"sources":["components/pdfCreator.js","components/pdfInfo.js","components/pdfStyle.js","components/pdfContent.js","components/pdfHeader.js","components/pdfFooter.js","components/pdfWatermark.js","components/pdfText.js","components/pdfImage.js"],"names":["dmx","Component","attributes","content","type","String","default","ui","valuePrefix","valuesSelector","valuesSelectorAttribute","values","title","value","compress","Boolean","userPassword","labelWidth","ownerPassword","pageSize","enum","pageOrientation","pageMargins","Number","Array","groupTitle","arrayVariables","isDynamic","variables","name","dataBindings","arrayIndex","defaultValue","tagName","children","allowed_children","allowedGlobalChildren","linkFiles","src","detect","methods","download","filename","this","_createPdf","open","print","getBase64","Promise","resolve","reject","data","preview","target","iframe","document","getElementById","getDataUrl","dataUrl","init","styles","getComputedStyle","body","getPropertyValue","_primary","_secondary","_success","_danger","_warning","_info","_light","_dark","_styles","_bootstrapStyles","_pageSizes","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","RA0","RA1","RA2","RA3","RA4","SRA0","SRA1","SRA2","SRA3","SRA4","EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID","_pageSize","l","props","size","width","height","margin","docDefinition","images","child","$type","info","ret","_createContent","Object","assign","_createHeader","header","_createFooter","footer","watermark","querySelector","dmxComponent","pageBreakBefore","currentNode","followingNodesOnPage","nodesOnNextPage","previousNodesOnPage","isArray","style","includes","length","debug","console","pdfMake","createPdf","bootstrap","_bootstrapLayout","hLineWidth","i","node","s","table","dividers","vLineWidth","hLineColor","vLineColor","paddingLeft","paddingRight","paddingTop","paddingBottom","fillColor","color","background","fillOpacity","fontSize","h1","h2","h3","h4","h5","h6","alignment","bold","italics","decoration","author","subject","keywords","creator","producer","font","fontFeatures","lineHeight","markerColor","decorationStyle","decorationColor","removeExtraBlanks","showHidden","removeTagClasses","tableAutoSize","inheritFrom","_getAbsoluteUrl","url","a","createElement","href","_prepareContent","contentWidth","template","innerHTML","$node","querySelectorAll","forEach","el","removeAttribute","setAttribute","remove","headerRows","firstRow","cols","pad","classList","contains","widths","from","map","push","totalRows","footerRows","dataset","pdfmake","JSON","stringify","layout","html","htmlToPdfmake","imagesByReference","defaultStyles","th","customTag","params","element","columnGap","columns","stack","text","test","tocItem","render","display","$parse","ref","Math","random","toString","slice","fit","image","currentPage","pageCount","structuredClone","col","replace","opacity","angle"],"mappings":"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","file":"dmxPdfCreator.js","sourcesContent":["dmx.Component('pdf-creator', {\r\n\r\n  attributes: {\r\n\r\n    // querySelector to the content element when not as child\r\n    content: {\r\n      type: String,\r\n      default: null,\r\n      ui: {\r\n        valuePrefix: '#',\r\n        valuesSelector: '[is=\"dmx-pdf-content\"]',\r\n        valuesSelectorAttribute: 'id',\r\n        values: [\r\n          { title: 'None', value: ''}\r\n        ]\r\n      }\r\n    },\r\n\r\n    compress: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n\r\n    userPassword: {\r\n      type: String,\r\n      default: null,\r\n      ui: {\r\n        labelWidth: 120\r\n      }\r\n    },\r\n\r\n    ownerPassword: {\r\n      type: String,\r\n      default: null,\r\n      ui: {\r\n        labelWidth: 120\r\n      }\r\n    },\r\n\r\n    pageSize: {\r\n      type: String,\r\n      default: 'A4',\r\n      enum: ['4A0', '2A0', 'A0', 'A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8', 'A9', 'A10', 'B0', 'B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B8', 'B9', 'B10', 'C0', 'C1', 'C2', 'C3', 'C4', 'C5', 'C6', 'C7', 'C8', 'C9', 'C10', 'RA0', 'RA1', 'RA2', 'RA3', 'RA4', 'SRA0', 'SRA1', 'SRA2', 'SRA3', 'SRA4', 'LETTER', 'LEGAL', 'TABLOID', 'EXECUTIVE', 'FOLIO'],\r\n      ui: {\r\n        labelWidth: 120\r\n      }\r\n    },\r\n\r\n    pageOrientation: {\r\n      type: String,\r\n      default: 'portrait',\r\n      enum: ['portrait', 'landscape'],\r\n      ui: {\r\n        labelWidth: 120\r\n      }\r\n    },\r\n\r\n    pageMargins: {\r\n      type: [Number, Array],\r\n      default: [40, 40, 40, 40],\r\n      ui: {\r\n        groupTitle: 'Page Margin',\r\n        arrayVariables: true,\r\n        isDynamic: true,\r\n        variables: [\r\n          {name: 'marginLeft', type: 'text', title: 'Left', dataBindings: true, arrayIndex:0, defaultValue: 40},\r\n          {name: 'marginTop', type: 'text', title: 'Top', dataBindings: true, arrayIndex:1, defaultValue: 40},\r\n          {name: 'marginRight', type: 'text', title: 'Right', dataBindings: true, arrayIndex:2, defaultValue: 40},\r\n          {name: 'marginBottom', type: 'text', title: 'Bottom', dataBindings: true, arrayIndex:3, defaultValue: 40},\r\n        ]\r\n      },\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-creator',\r\n    children: ['dmx-pdf-info', 'dmx-pdf-style', 'pdf-content', 'dmx-pdf-header', 'dmx-pdf-footer', 'dmx-pdf-watermark'],\r\n    allowed_children: {'dmx-pdf-info':1, 'dmx-pdf-style':-1, 'pdf-content':1, 'dmx-pdf-header':1, 'dmx-pdf-footer':1, 'dmx-pdf-watermark':1},\r\n    allowedGlobalChildren: {},\r\n    linkFiles: [\r\n      {src: 'https://cdn.jsdelivr.net/npm/pdfmake@0.2.9/build/pdfmake.min.js', detect: 'https://cdn\\\\.jsdelivr\\\\.net/npm/pdfmake(?:@0\\\\.\\\\2.\\\\d+)?/build/pdfmake\\\\.min\\\\.js'},\r\n      {src: 'https://cdn.jsdelivr.net/npm/pdfmake@0.2.9/build/vfs_fonts.min.js',  detect: 'https://cdn\\\\.jsdelivr\\\\.net/npm/pdfmake(?:@0\\\\.\\\\2.\\\\d+)?/build/vfs_fonts\\\\.min\\\\.js'},\r\n      {src: 'https://cdn.jsdelivr.net/npm/html-to-pdfmake@2.5.2/browser.min.js', detect: 'https://cdn\\\\.jsdelivr\\\\.net/npm/html-to-pdfmake(?:@2\\\\.\\\\5.\\\\d+)?/browser\\\\.min\\\\.js'}\r\n    ]\r\n  },\r\n\r\n  methods: {\r\n    download (filename) {\r\n      this._createPdf().download(filename);\r\n    },\r\n\r\n    open () {\r\n      this._createPdf().open();\r\n    },\r\n\r\n    print () {\r\n      this._createPdf().print();\r\n    },\r\n\r\n    getBase64 () {\r\n      return new Promise((resolve, reject) => {\r\n        this._createPdf().getBase64((data) => {\r\n          resolve(data);\r\n        });\r\n      });\r\n    },\r\n\r\n    preview (target) {\r\n      const iframe = document.getElementById(target);\r\n      if (iframe) {\r\n        this._createPdf().getDataUrl((dataUrl) => {\r\n          iframe.src = dataUrl;\r\n        });\r\n      }\r\n    },\r\n  },\r\n\r\n  init () {\r\n    const styles = getComputedStyle(document.body);\r\n\r\n    if (styles.getPropertyValue('--bs-primary')) {\r\n      this._primary = styles.getPropertyValue('--bs-primary');\r\n      this._secondary = styles.getPropertyValue('--bs-secondary');\r\n      this._success = styles.getPropertyValue('--bs-success');\r\n      this._danger = styles.getPropertyValue('--bs-danger');\r\n      this._warning = styles.getPropertyValue('--bs-warning');\r\n      this._info = styles.getPropertyValue('--bs-info');\r\n      this._light = styles.getPropertyValue('--bs-light');\r\n      this._dark = styles.getPropertyValue('--bs-dark');\r\n      this._styles = this._bootstrapStyles();\r\n    } else {\r\n      this._styles = {};\r\n    }\r\n\r\n    this._pageSizes = {\r\n      '4A0': [4767.87, 6740.79],\r\n      '2A0': [3370.39, 4767.87],\r\n      A0: [2383.94, 3370.39],\r\n      A1: [1683.78, 2383.94],\r\n      A2: [1190.55, 1683.78],\r\n      A3: [841.89, 1190.55],\r\n      A4: [595.28, 841.89],\r\n      A5: [419.53, 595.28],\r\n      A6: [297.64, 419.53],\r\n      A7: [209.76, 297.64],\r\n      A8: [147.40, 209.76],\r\n      A9: [104.88, 147.40],\r\n      A10: [73.70, 104.88],\r\n      B0: [2834.65, 4008.19],\r\n      B1: [2004.09, 2834.65],\r\n      B2: [1417.32, 2004.09],\r\n      B3: [1000.63, 1417.32],\r\n      B4: [708.66, 1000.63],\r\n      B5: [498.90, 708.66],\r\n      B6: [354.33, 498.90],\r\n      B7: [249.45, 354.33],\r\n      B8: [175.75, 249.45],\r\n      B9: [124.72, 175.75],\r\n      B10: [87.87, 124.72],\r\n      C0: [2599.37, 3676.54],\r\n      C1: [1836.85, 2599.37],\r\n      C2: [1298.27, 1836.85],\r\n      C3: [918.43, 1298.27],\r\n      C4: [649.13, 918.43],\r\n      C5: [459.21, 649.13],\r\n      C6: [323.15, 459.21],\r\n      C7: [229.61, 323.15],\r\n      C8: [161.57, 229.61],\r\n      C9: [113.39, 161.57],\r\n      C10: [79.37, 113.39],\r\n      RA0: [2437.80, 3458.27],\r\n      RA1: [1729.13, 2437.80],\r\n      RA2: [1218.90, 1729.13],\r\n      RA3: [864.57, 1218.90],\r\n      RA4: [609.45, 864.57],\r\n      SRA0: [2551.18, 3628.35],\r\n      SRA1: [1814.17, 2551.18],\r\n      SRA2: [1275.59, 1814.17],\r\n      SRA3: [907.09, 1275.59],\r\n      SRA4: [637.80, 907.09],\r\n      EXECUTIVE: [521.86, 756.00],\r\n      FOLIO: [612.00, 936.00],\r\n      LEGAL: [612.00, 1008.00],\r\n      LETTER: [612.00, 792.00],\r\n      TABLOID: [792.00, 1224.00],\r\n    };\r\n  },\r\n\r\n  _pageSize () {\r\n    const l = this.props.pageOrientation == 'landscape';\r\n    const size = this._pageSizes[this.props.pageSize];\r\n    return {\r\n      width: size[l ? 1 : 0],\r\n      height: size[l ? 0 : 1],\r\n      margin: this.props.pageMargins,\r\n    };\r\n  },\r\n\r\n  _createPdf () {\r\n    const docDefinition = {\r\n      styles: this._styles,\r\n      images: {},\r\n      ...this.props,\r\n    };\r\n\r\n    for (const child of this.children) {\r\n      switch (child.data.$type) {\r\n        case 'pdf-info':\r\n          docDefinition.info = child.props;\r\n          break;\r\n        case 'pdf-style':\r\n          docDefinition.styles[child.props.name] = child.props;\r\n          break;\r\n        case 'pdf-content':\r\n          {\r\n            const ret = child._createContent(this._pageSize());\r\n            docDefinition.content = ret.content;\r\n            Object.assign(docDefinition.images, ret.images);\r\n          }\r\n          break;\r\n        case 'pdf-header':\r\n          {\r\n            const ret = child._createHeader();\r\n            docDefinition.header = ret.header;\r\n            Object.assign(docDefinition.images, ret.images);\r\n          }\r\n          break;\r\n        case 'pdf-footer':\r\n          {\r\n            const ret = child._createFooter();\r\n            docDefinition.footer = ret.footer;\r\n            Object.assign(docDefinition.images, ret.images);\r\n          }\r\n          break;\r\n        case 'pdf-watermark':\r\n          docDefinition.watermark = child.props;\r\n          break;\r\n      }\r\n    }\r\n\r\n    if (this.props.content) {\r\n      const content = document.querySelector(this.props.content);\r\n      if (content && content.dmxComponent) {\r\n        const ret = content.dmxComponent._createContent(this._pageSize());\r\n        docDefinition.content = ret.content;\r\n        Object.assign(docDefinition.images, ret.images);\r\n      }\r\n    }\r\n\r\n    docDefinition.pageBreakBefore = (currentNode, followingNodesOnPage, nodesOnNextPage, previousNodesOnPage) => {\r\n      return Array.isArray(currentNode.style) && currentNode.style.includes('pdf-pagebreak-before') && previousNodesOnPage.length;\r\n    };\r\n\r\n    if (dmx.debug) {\r\n      console.debug('docDefinition', docDefinition);\r\n    }\r\n\r\n    /*\r\n    if (Array.isArray(docDefinition.content)) {\r\n      docDefinition.content.unshift({\r\n        toc: {\r\n          title: { text: 'Table of Contents', style: 'html-h1' },\r\n          pageBreak: 'after',\r\n        },\r\n      });\r\n    }\r\n    */\r\n\r\n    return pdfMake.createPdf(docDefinition, {\r\n      bootstrap: this._bootstrapLayout(),\r\n    });\r\n  },\r\n\r\n  _bootstrapLayout () {\r\n    if (!this._primary) return {};\r\n    return {\r\n      hLineWidth: (i, node) => {\r\n        const s = Array.isArray(node.table.dividers) && node.table.dividers.includes(i) ? 1 : .5;\r\n        if (node.style.includes('table-borderless')) return 0;\r\n        if (node.style.includes('table-bordered')) return s;\r\n        return i == 0 ? 0 : s;\r\n      },\r\n      vLineWidth: (i, node) => node.style.includes('table-bordered') ? .5 : 0,\r\n      hLineColor: (i, node) => Array.isArray(node.table.dividers) && node.table.dividers.includes(i) ? 'black' : '#b6bfc8',\r\n      vLineColor: (i, node) => '#b6bfc8',\r\n      paddingLeft: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      paddingRight: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      paddingTop: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      paddingBottom: (i, node) => node.style.includes('table-sm') ? 3 : 6,\r\n      fillColor: (i, node) => (node.style.includes('table-striped') && i % 2 == 1) ? '#f2f2f2' : null,\r\n    }\r\n  },\r\n\r\n  _bootstrapStyles () {\r\n    return {\r\n      'text-primary': { color: this._primary },\r\n      'text-secondary': { color: this._secondary },\r\n      'text-success': { color: this._success },\r\n      'text-danger': { color: this._danger },\r\n      'text-warning': { color: this._warning },\r\n      'text-info': { color: this._info },\r\n      'text-light': { color: this._light },\r\n      'text-dark': { color: this._dark },\r\n      'link-primary': { color: this._primary },\r\n      'link-secondary': { color: this._secondary },\r\n      'link-success': { color: this._success },\r\n      'link-danger': { color: this._danger },\r\n      'link-warning': { color: this._warning },\r\n      'link-info': { color: this._info },\r\n      'link-light': { color: this._light },\r\n      'link-dark': { color: this._dark },\r\n      'bg-primary': { background: this._primary },\r\n      'bg-secondary': { background: this._secondary },\r\n      'bg-success': { background: this._success },\r\n      'bg-danger': { background: this._danger },\r\n      'bg-warning': { background: this._warning },\r\n      'bg-info': { background: this._info },\r\n      'bg-light': { background: this._light },\r\n      'bg-dark': { background: this._dark },\r\n      'table-primary': { fillColor: this._primary, fillOpacity: 0.25 },\r\n      'table-secondary': { fillColor: this._secondary, fillOpacity: 0.25 },\r\n      'table-success': { fillColor: this._success, fillOpacity: 0.25 },\r\n      'table-danger': { fillColor: this._danger, fillOpacity: 0.25 },\r\n      'table-warning': { fillColor: this._warning, fillOpacity: 0.25 },\r\n      'table-info': { fillColor: this._info, fillOpacity: 0.25 },\r\n      'table-light': { fillColor: this._light, fillOpacity: 0.25 },\r\n      'table-dark': { fillColor: this._dark, fillOpacity: 0.25 },\r\n      'fs-1': { fontSize: 24 },\r\n      'fs-2': { fontSize: 22 },\r\n      'fs-3': { fontSize: 20 },\r\n      'fs-4': { fontSize: 18 },\r\n      'fs-5': { fontSize: 16 },\r\n      'fs-6': { fontSize: 14 },\r\n      'h1': { fontSize: 24 },\r\n      'h2': { fontSize: 22 },\r\n      'h3': { fontSize: 20 },\r\n      'h4': { fontSize: 18 },\r\n      'h5': { fontSize: 16 },\r\n      'h6': { fontSize: 14 },\r\n      'text-start': { alignment: 'left' },\r\n      'text-center': { alignment: 'center' },\r\n      'text-end': { alignment: 'right' },\r\n      'fw-bold': { bold: true },\r\n      'fw-bolder': { bold: true },\r\n      'fw-normal': { bold: false },\r\n      'fst-italic': { italics: true },\r\n      'fst-normal': { italics: false },\r\n      'text-decoration-underline': { decoration: 'underline' },\r\n      'text-decoration-line-through': { decoration: 'lineThrough' },\r\n    };\r\n  },\r\n\r\n});","dmx.Component('pdf-info', {\r\n\r\n  attributes: {\r\n    title: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    author: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    subject: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    keywords: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    creator: {\r\n      type: String,\r\n      default: 'Wappler PDF Creator',\r\n    },\r\n\r\n    producer: {\r\n      type: String,\r\n      default: 'Wappler PDF Creator',\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-info',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-style', {\r\n\r\n  attributes: {\r\n    name: {\r\n      type: String,\r\n      default: '',\r\n      ui: {\r\n        title: 'Class Name'\r\n      }\r\n    },\r\n\r\n    font: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    fontSize: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    fontFeatures: {\r\n      type: Array,\r\n      default: null,\r\n    },\r\n\r\n    lineHeight: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n\r\n    bold: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    italics: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    alignment: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['left', 'center', 'right', 'justify'],\r\n    },\r\n\r\n    color: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    background: {\r\n      type: String,\r\n      default: null,\r\n      ui: {\r\n        type: 'css_color',\r\n        title: 'Bg Color'\r\n      }\r\n    },\r\n\r\n    markerColor: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    decoration: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['underline', 'lineThrough', 'overline'],\r\n    },\r\n\r\n    decorationStyle: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['dotted', 'dashed', 'double', 'wavy'],\r\n      ui: {\r\n        title: 'Style'\r\n      }\r\n    },\r\n\r\n    decorationColor: {\r\n      type: String,\r\n      default: null,\r\n      ui: {\r\n        title: 'Color'\r\n      }\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-style',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-content', {\r\n\r\n  attributes: {\r\n    removeExtraBlanks: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    showHidden: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    removeTagClasses: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    tableAutoSize: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    inheritFrom: 'bs5-col'\r\n  },\r\n\r\n  _getAbsoluteUrl (url) {\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    return a.href;\r\n  },\r\n\r\n  _prepareContent (pageSize) {\r\n    //console.log('pageSize', pageSize);\r\n    const contentWidth = pageSize.width - pageSize.margin[0] - pageSize.margin[2];\r\n    const template = document.createElement('template');\r\n    template.innerHTML = this.$node.innerHTML;\r\n\r\n    template.content.querySelectorAll('[id]').forEach((el) => {\r\n      el.removeAttribute('id');\r\n    });\r\n\r\n    template.content.querySelectorAll('[src]').forEach((el) => {\r\n      el.setAttribute('src', this._getAbsoluteUrl(el.src));\r\n    });\r\n\r\n    template.content.querySelectorAll('[href]').forEach((el) => {\r\n      el.setAttribute('href', this._getAbsoluteUrl(el.href));\r\n    });\r\n\r\n    template.content.querySelectorAll('.d-print-none').forEach((el) => {\r\n      el.remove();\r\n    });\r\n\r\n    template.content.querySelectorAll('.table').forEach((el) => {\r\n      const headerRows = el.querySelectorAll('thead tr');\r\n      const firstRow = el.querySelector('tr').children;\r\n      const cols = firstRow.length;\r\n      const pad = el.classList.contains('table-sm') ? 6 : 12;\r\n      const dividers = [];\r\n      \r\n      let widths = Array.from({length:cols});\r\n      if (el.querySelectorAll('th.w-100, td.w-100').length) { \r\n        for (let i = 0; i < cols; i++) {\r\n          if (firstRow[i].classList.contains('w-100')) {\r\n            widths[i] = '*';\r\n          } else {\r\n            widths[i] = 'auto';\r\n          }\r\n        }\r\n      } else {\r\n        widths = Array.from({length:cols}).map(() => (contentWidth / cols) - pad);\r\n      }\r\n\r\n      if (el.querySelector('tbody.table-group-divider')) {\r\n        dividers.push(headerRows.length);\r\n      }\r\n\r\n      if (el.querySelector('tfoot.table-group-divider')) {\r\n        const totalRows = el.querySelectorAll('tr').length;\r\n        const footerRows = el.querySelectorAll('tfoot tr').length;\r\n        dividers.push(totalRows - footerRows);\r\n      }\r\n      \r\n      el.dataset.pdfmake = JSON.stringify({\r\n        layout: 'bootstrap',\r\n        widths: widths,\r\n        dividers: dividers,\r\n        headerRows: headerRows.length\r\n      });\r\n    });\r\n\r\n    template.content.querySelectorAll('hr').forEach((el) => {\r\n      el.dataset.pdfmake = JSON.stringify({ width: contentWidth });\r\n    });\r\n\r\n    return template.innerHTML;\r\n  },\r\n\r\n  _createContent (pageSize) {\r\n    let html = this._prepareContent(pageSize);\r\n\r\n    return htmlToPdfmake(html, {\r\n      ...this.props,\r\n      imagesByReference: true,\r\n      defaultStyles: {\r\n        th: { bold: true, fillColor: '' },\r\n      },\r\n      customTag: (params) => {\r\n        // support for columns\r\n        if (params.element.classList.contains('row')) {\r\n          params.ret.columnGap = 10;\r\n          params.ret.columns = params.ret.stack || params.ret.text;\r\n          delete params.ret.stack;\r\n          delete params.ret.text;\r\n        }\r\n\r\n        if (/^H\\d$/.test(params.element.tagName)) {\r\n          params.ret.tocItem = true;\r\n        }\r\n\r\n        return params.ret;\r\n      },\r\n    });\r\n  },\r\n\r\n});","dmx.Component('pdf-header', {\r\n\r\n  attributes: {\r\n    columnGap: {\r\n      type: Number,\r\n      default: 10,\r\n    },\r\n\r\n    margin: {\r\n      type: [Number, Array],\r\n      default: 10,\r\n      ui: {\r\n        groupTitle: 'Margin',\r\n        arrayVariables: true,\r\n        isDynamic: true,\r\n        variables: [\r\n          {name: 'marginLeft', type: 'text', title: 'Left', dataBindings: true, arrayIndex:0, defaultValue: 10},\r\n          {name: 'marginTop', type: 'text', title: 'Top', dataBindings: true, arrayIndex:1, defaultValue: 10},\r\n          {name: 'marginRight', type: 'text', title: 'Right', dataBindings: true, arrayIndex:2, defaultValue: 10},\r\n          {name: 'marginBottom', type: 'text', title: 'Bottom', dataBindings: true, arrayIndex:3, defaultValue: 10},\r\n        ]\r\n      },\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-header',\r\n    children: ['dmx-pdf-text', 'dmx-pdf-image'],\r\n    allowed_children: {'dmx-pdf-text':-1, 'dmx-pdf-image':-1},\r\n    allowedGlobalChildren: {}\r\n  },\r\n\r\n  render (node) {\r\n    node.style.display = 'none';\r\n    this.$parse();\r\n  },\r\n\r\n  _getAbsoluteUrl (url) {\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    return a.href;\r\n  },\r\n\r\n  _createHeader () {\r\n    const ret = {\r\n      header: {\r\n        columns: [],\r\n        ...this.props,\r\n      },\r\n      images: {},\r\n    };\r\n\r\n    for (const child of this.children) {\r\n      if (child.data.$type === 'pdf-image') {\r\n        const ref = 'img_ref_' + Math.random().toString(36).slice(2,8);\r\n        const url = this._getAbsoluteUrl(child.props.src);\r\n        const props = {};\r\n        \r\n        if (child.props.fit) {\r\n          props.fit = [child.props.width || 1000, child.props.height || 1000];\r\n          if (child.props.width) props.width = child.props.width;\r\n        } else {\r\n          if (child.props.width) props.width = child.props.width;\r\n          if (child.props.height) props.height = child.props.height;\r\n        }\r\n\r\n        ret.images[ref] = url;\r\n        ret.header.columns.push({\r\n          image: ref,\r\n          ...props\r\n        });\r\n\r\n        continue;\r\n      }\r\n\r\n      ret.header.columns.push({ ...child.props });\r\n    }\r\n\r\n    return {\r\n      header: (currentPage, pageCount) => {\r\n        const header = structuredClone(ret.header);\r\n\r\n        for (const col of header.columns) {\r\n          if (col.text) col.text = col.text.replace(/##page##/g, currentPage).replace(/##total##/g, pageCount);\r\n        }\r\n        \r\n        //console.info('pdf-header', header);\r\n\r\n        return header;\r\n      },\r\n      images: ret.images,\r\n    };\r\n  },\r\n\r\n});","dmx.Component('pdf-footer', {\r\n\r\n  attributes: {\r\n    columnGap: {\r\n      type: Number,\r\n      default: 10,\r\n    },\r\n\r\n    margin: {\r\n      type: [Number, Array],\r\n      default: 10,\r\n      ui: {\r\n        groupTitle: 'Margin',\r\n        arrayVariables: true,\r\n        isDynamic: true,\r\n        variables: [\r\n          {name: 'marginLeft', type: 'text', title: 'Left', dataBindings: true, arrayIndex:0, defaultValue: 10},\r\n          {name: 'marginTop', type: 'text', title: 'Top', dataBindings: true, arrayIndex:1, defaultValue: 10},\r\n          {name: 'marginRight', type: 'text', title: 'Right', dataBindings: true, arrayIndex:2, defaultValue: 10},\r\n          {name: 'marginBottom', type: 'text', title: 'Bottom', dataBindings: true, arrayIndex:3, defaultValue: 10},\r\n        ]\r\n      },\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-footer',\r\n    template: `<dmx-pdf-footer>\r\n  <dmx-pdf-text text=\"##page## / ##total##\" alignment=\"center\" fontSize=\"10\" color=\"gray\" />\r\n</dmx-pdf-footer>`,\r\n    children: ['dmx-pdf-text', 'dmx-pdf-image'],\r\n    allowed_children: {'dmx-pdf-text':-1, 'dmx-pdf-image':-1},\r\n    allowedGlobalChildren: {}\r\n  },\r\n\r\n  render (node) {\r\n    node.style.display = 'none';\r\n    this.$parse();\r\n  },\r\n\r\n  _getAbsoluteUrl (url) {\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    return a.href;\r\n  },\r\n\r\n  _createFooter () {\r\n    const ret = {\r\n      footer: {\r\n        columns: [],\r\n        ...this.props,\r\n      },\r\n      images: {},\r\n    };\r\n\r\n    for (const child of this.children) {\r\n      if (child.data.$type === 'pdf-image') {\r\n        const ref = 'img_ref_' + Math.random().toString(36).slice(2,8);\r\n        const url = this._getAbsoluteUrl(child.props.src);\r\n        const props = {};\r\n\r\n        if (child.props.fit) {\r\n          props.fit = [child.props.width || 1000, child.props.height || 1000];\r\n        } else {\r\n          if (child.props.width) props.width = child.props.width;\r\n          if (child.props.height) props.height = child.props.height;\r\n        }\r\n\r\n        ret.images[ref] = url;\r\n        ret.footer.columns.push({\r\n          image: ref,\r\n          ...props\r\n        });\r\n\r\n        continue;\r\n      }\r\n\r\n      ret.footer.columns.push({ ...child.props });\r\n    }\r\n\r\n    return {\r\n      footer: (currentPage, pageCount) => {\r\n        const footer = structuredClone(ret.footer);\r\n\r\n        for (const col of footer.columns) {\r\n          if (col.text) col.text = col.text.replace(/##page##/g, currentPage).replace(/##total##/g, pageCount);\r\n        }\r\n\r\n        //console.info('pdf-footer', footer);\r\n\r\n        return footer;\r\n      },\r\n      images: ret.images,\r\n    };\r\n  },\r\n\r\n});","dmx.Component('pdf-watermark', {\r\n\r\n  attributes: {\r\n    text: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    color: {\r\n      type: String,\r\n      default: 'black',\r\n    },\r\n\r\n    opacity: {\r\n      type: Number,\r\n      default: .25,\r\n    },\r\n\r\n    bold: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    italics: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    fontSize: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    angle: {\r\n      type: Number,\r\n      default: -45,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-watermark',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-text', {\r\n\r\n  attributes: {\r\n    width: { // column width\r\n      type: [String, Number],\r\n      default: null,\r\n    },\r\n\r\n    text: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n\r\n    fontSize: {\r\n      type: Number,\r\n      default: 12,\r\n    },\r\n\r\n    lineHeight: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n\r\n    bold: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    italics: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n    alignment: {\r\n      type: String,\r\n      default: null,\r\n      enum: ['left', 'center', 'right', 'justify'],\r\n    },\r\n\r\n    color: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n\r\n    background: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-text',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});","dmx.Component('pdf-image', {\r\n\r\n  attributes: {\r\n    width: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    height: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n\r\n    src: {\r\n      type: String,\r\n      default: '',\r\n      ui: {\r\n        type: 'image',\r\n      }\r\n    },\r\n\r\n    fit: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n\r\n  },\r\n\r\n  ui: {\r\n    tagName: 'dmx-pdf-image',\r\n    allowedGlobalChildren: {}\r\n  }\r\n\r\n});"]}